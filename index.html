<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Tính tiền chênh lệch nhân viên</title>
</head>
<body>
  <h2>Tính tiền chênh lệch nhân viên</h2>

  <label for="name">Tên nhân viên:</label>
  <input type="text" id="name"><br><br>

  <label for="start">Giờ vào:</label>
  <input type="time" id="start"><br><br>

  <label for="end">Giờ ra:</label>
  <input type="time" id="end"><br><br>

  <label for="customAmount">Hoặc nhập trực tiếp số tiền làm được (VND):</label>
  <input type="number" id="customAmount" placeholder="Không bắt buộc"><br><br>

  <label for="rate">Lương theo giờ (VND):</label>
  <input type="number" id="rate" placeholder="Mặc định: 200000"><br><br>

  <button onclick="tinhLuong()">Tính lương</button>

  <div id="result" style="margin-top: 20px; border: 1px solid #ccc; padding: 10px;"></div>

  <script>
    function tinhLuong() {
      const name = document.getElementById('name').value;
      const start = document.getElementById('start').value;
      const end = document.getElementById('end').value;
      const rateInput = document.getElementById('rate').value;
      const customAmountInput = document.getElementById('customAmount').value;

      if (!name) {
        alert('Vui lòng nhập tên nhân viên.');
        return;
      }

      const hourlyRate = rateInput ? parseFloat(rateInput) : 200000;
      let totalSalary = 0;
      let workedHours = null;

      // Nếu có nhập số tiền, ưu tiên dùng
      if (customAmountInput) {
        totalSalary = parseFloat(customAmountInput);
      } else {
        // Nếu không có tiền nhập, dùng thời gian để tính
        if (!start || !end) {
          alert('Vui lòng nhập giờ vào và giờ ra hoặc nhập số tiền.');
          return;
        }

        const [startHour, startMinute] = start.split(':').map(Number);
        const [endHour, endMinute] = end.split(':').map(Number);

        const startTotalMinutes = startHour * 60 + startMinute;
        const endTotalMinutes = endHour * 60 + endMinute;

        const workedMinutes = endTotalMinutes - startTotalMinutes;
        workedHours = workedMinutes / 60;
        totalSalary = workedHours * hourlyRate;
      }

      const employeeKeep = totalSalary * 0.65;
      const returnToYou = totalSalary * 0.35;

      document.getElementById('result').innerHTML = `
        <strong>Kết quả cho: ${name}</strong><br>
        ${workedHours !== null ? `Thời gian làm: ${workedHours.toFixed(2)} giờ<br>` : ''}
        Tổng lương: ${totalSalary.toLocaleString()} VND<br>
        Trả lại bạn: ${returnToYou.toLocaleString()} VND<br>
        Nhân viên được giữ: ${employeeKeep.toLocaleString()} VND
      `;
    }
  </script>
</body>
</html>
